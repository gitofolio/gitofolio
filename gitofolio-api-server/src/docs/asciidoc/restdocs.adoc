ifndef::snippets[]
:snippets: ./build/generated-snippets
endif::[]
= Gitofolio RESTful API Docs
:toc: left
:toclevels: 3
:sectlinks:

[[enterence]]
== 들어가며
gitofolio rest api를 사용하여, 유저데이터, 통계, 포토폴리오 정보 등을 가져올수있습니다.

[[HATEOAS]]
== gitofolio HATEOAS
gitofolio는 HATEOAS를 지원합니다.

HATEOAS를 사용하여, 서버의 변화에 유연하게 대처하세요.

TIP: HATEOAS에는 한 URL에서 다음 선택지로 선택가능한 모든 URL이 기술되어 있습니다.

CAUTION: HATEOAS의 rel값은 절대 변경되지않으며, URL은 변경될수있습니다. 

엔드포인트 '/'요청에 대한 응답은 아래와 같습니다.

include::{snippets}/endpoint/get/http-response.adoc[]

[[HATEOAS-naming-convention]]
=== HATEOAS 네이밍 규칙
HATEOAS는 아래와 같은 네이밍 규칙이 있습니다.

- 기본적으로 camel표기법을 따릅니다.

- "href"키 값에는 다음으로 선택가능한 URL이 표시됩니다. 

TIP: "href"가 갖고있는 값의 {     } 에는 응답으로 받은 표현의 같은 key값과 매칭됩니다. 예를들어, {name}이라면, JSON "name"키의 값과 매칭됩니다.

- "method"키 값에는 "href"와 상호작용하기 위해 선택해야하는 HTTP method가 정의되어있습니다.

- "rel"키 값은 "href"를 가리키는 포인터 입니다.

NOTE: "rel"키 값의 명명 규칙은 변경되지 않습니다.

- "rel"키 값은 {http method}+{다음 URL의 일부}로 이루어져 있으며, 마찬가지로 camel표기법을 따릅니다.

CAUTION: "rel" 네이밍 규칙에서, 자기자신을 호출할경우는 {http method}+This로 이루어집니다.

[[custom-api]]
== 커스텀 API
이 구역에는 사용자가 자신의 이력서에 직접 적용할수있는 API가 기술되어있습니다.

[[custom-api-stat]]
=== 통계
TIP: 애플리케이션에서 제작된 링크(ex.포트폴리오 카드)를 통해 유입되는 통계는 자동으로 수집되어 증가됩니다.

모든 경로에 대해서 유입경로를 수집하고 싶다면, 아래 링크로 GET요청을 보내면 됩니다.

GET : http://api.gitofolio.com/portfolio/{userId}/{cardId}?redirect=false

예를들어, 서버의 응답이 아래와 같을때

include::{snippets}/portfoliocards/get/http-response.adoc[]

{userId}에 가장 바깥 "id"의 value를

{cardId}에 portfolioUrl과 매핑된 card "id"의 value를 입력하면 됩니다.

[[user]]
== 유저
NOTE: user에 관련된 API 목차 입니다.

유저 수정과 저장은 OAuth인증과정에서 자동으로 진행되며, 임의로 수정, 저장 할 수 없습니다.

이 목차에는 유저 가져오기, 유저 삭제하기, 현재 로그인 되어있는 유저 가져오기가 기술되어있습니다.

[[user-get]]
=== 유저 가져오기
api서버에 저장된 유저의 정보를 가져옵니다.

[[user-get-request]]
==== Request
요청 시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/user/get/http-request.adoc[]

include::{snippets}/user/get/path-parameters.adoc[]

[[user-get-response]]
==== Representation
요청에 대한 서버의 표현은 다음과 같습니다.

include::{snippets}/user/get/http-response.adoc[]

include::{snippets}/user/get/response-fields.adoc[]

[[user-get-error-handle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지않는 유저에 대해 NonExistUserException 예외처리를 합니다.

핸들링 결과는 아래처럼 표현됩니다.

include::{snippets}/user/get/fail/http-response.adoc[]

include::{snippets}/user/get/fail/response-fields.adoc[]

[[user-delete]]
=== 유저 삭제하기
DB에 저장되어있는 유저를 삭제합니다.

CAUTION: 인증 필요

[[user-delete-request]]
==== Request
DB에 저장되어있는 유저를 삭제하려면, DELETE메소드로 요청하세요.

요청 시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/user/delete/http-request.adoc[]

include::{snippets}/user/delete/path-parameters.adoc[]

[[user-delete-response]]
==== Representation
성공적으로 삭제되었다면, 아래와 같은 표현이 응답됩니다.

include::{snippets}/user/delete/http-response.adoc[]

[[user-delete-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 삭제 요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/user/delete/fail/http-response.adoc[]

include::{snippets}/user/delete/fail/response-fields.adoc[]

[[logined-user-get]]
=== 로그인된 유저 가져오기
현재 로그인된 유저의 정보를 가져옵니다.

CAUTION: 인증 필요

[[logined-user-get-request]]
==== Request
현재 로그인되어있는 유저를 가져옵니다.

include::{snippets}/user/logined/http-request.adoc[]

[[logined-user-get-response]]
==== Representation
로그인 되어있는 유저가 있다면, 아래 표현이 응답됩니다.

include::{snippets}/user/logined/http-response.adoc[]

[[logined-user-get-errorhandle1]]
==== AuthenticateException
CAUTION: 로그인 되어있는 유저가 없다면, AuthenticateException 예외처리를 합니다.

include::{snippets}/user/logined/fail/http-response.adoc[]

include::{snippets}/user/logined/fail/response-fields.adoc[]

[[userstat]]
== 유저 통계
NOTE: 유저 통계정보에 관한 목차입니다. 

이 목차에는 유저 포토폴리오 총 방문자수, 총 스타수가 포함되어있습니다.

[[userstat-get]]
=== 유저 통계 가져오기
요청된 유저에 대한 통계 정보를 가져옵니다.

CAUTION: 유저 통계정보는 서버에 의해 생성되며, 클라이언트가 생성에 직접적으로 관여할 수 없습니다. 따라서, GET메소드만 허용되어있습니다.

[[userstat-get-request]]
==== Request
유저 정보를 가져오기위해 GET메소드로 요청합니다.

요청 시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/userstat/get/http-request.adoc[]

include::{snippets}/userstat/get/path-parameters.adoc[]

[[userstat-get-response]]
==== Representation
요청에 대한 서버 응답의 표현은 아래와 같습니다.

include::{snippets}/userstat/get/http-response.adoc[]

include::{snippets}/userstat/get/response-fields.adoc[]

[[userstat-get-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 통계정보 요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/userstat/get/fail/http-response.adoc[]

include::{snippets}/userstat/get/fail/response-fields.adoc[]

[[userdailystat]]
== 유저 날짜별 통계
NOTE: 유저 날짜별 통계에 관한 목차 입니다.

이 목차에는 날짜별 방문자수, 날짜별 유입 경로가 저장되어 있습니다.

[[userdailystat-request]]
=== 유저 날짜별 통계 가져오기
요청 된 유저에 대한 날짜별 통계 정보를 가져옵니다.

CAUTION: 유저 날짜별 통계정보는 서버에 의해 생성되며, 클라이언트가 생성에 직접적으로 관여할 수 없습니다. 따라서, GET메소드만 허용되어있습니다.

[[userdailystat-get-request]]
==== Request
유저 날짜별 통계정보를 가져오기위해 GET 요청을 합니다.

요청시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/userdailystat/get/http-request.adoc[]

include::{snippets}/userdailystat/get/path-parameters.adoc[]

[[userdailystat-get-response]]
==== Representation
트랜잭션이 성공적으로 완료되었다면, 200 OK 응답과 함께 아래 표현이 응답됩니다.

include::{snippets}/userdailystat/get/http-response.adoc[]

include::{snippets}/userdailystat/get/response-fields.adoc[]

NOTE: 날짜별 방문자수 통계에 대해 최대 7개(날짜기준)를 저장하며, 초과시 오래된 순으로 자동 삭제됩니다.

NOTE: 유입 경로에 대해 최대 30개 까지 저장하며, 초과시 오래된 순으로 자동 삭제됩니다.

[[userdailystat-get-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 날짜별 통계정보 요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/userdailystat/get/fail/http-response.adoc[]

include::{snippets}/userdailystat/get/fail/response-fields.adoc[]

[[portfoliocards]]
== 포트폴리오 카드
NOTE: 유저에 매칭되는 포트폴리오 카드 API가 기술되어있습니다.

[[portfoliocards-get]]
=== 포트폴리오 카드 가져오기
유저에 저장된 포트폴리오 카드들을 가져옵니다.

[[portfoliocards-get-request]]
==== Request
포트폴리오 카드들을 가져오기위해 GET 요청을 합니다.

요청시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/portfoliocards/get/http-request.adoc[]

include::{snippets}/portfoliocards/get/path-parameters.adoc[]

include::{snippets}/portfoliocards/get/request-parameters.adoc[]

[[portfoliocards-get-response]]
==== Representation
트랜잭션이 성공적으로 완료되었다면, 200 OK 응답 코드와 함께 아래 표현이 응답됩니다.

include::{snippets}/portfoliocards/get/http-response.adoc[]

include::{snippets}/portfoliocards/get/response-fields.adoc[]

[[portfoliocards-get-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 포트폴리오 카드 요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/portfoliocards/get/fail/http-response.adoc[]

include::{snippets}/portfoliocards/get/fail/response-fields.adoc[]

[[portfoliocards-get-errorhandle2]]
==== UserExistButNothingException
CAUTION: 어떠한 포트폴리오 카드도 갖고있지 않은 유저의 포트폴리오 카드 요청에대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/portfoliocards/get/fail_but_exist_user/http-response.adoc[]

include::{snippets}/portfoliocards/get/fail_but_exist_user/response-fields.adoc[]

[[portfoliocards-get-errorhandle3]]
==== IllegalParameterException
CAUTION: 잘못된 파라미터와 함께 요청시 IllegalParameterException 처리를 합니다.

include::{snippets}/portfoliocards/get/parameterfail/http-request.adoc[]

include::{snippets}/portfoliocards/get/parameterfail/http-response.adoc[]

include::{snippets}/portfoliocards/get/parameterfail/response-fields.adoc[]

[[portfoliocards-post]]
=== 포트폴리오 카드 저장하기
DB에 저장되어있는 유저에 대해서, 포트폴리오 카드를 저장합니다.

CAUTION: 인증 필요

[[portfoliocards-post-request]]
==== Request
포트폴리오 카드를 저장하기 위해 POST 요청을 합니다.

요청시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/portfoliocards/post/http-request.adoc[]

include::{snippets}/portfoliocards/post/request-fields.adoc[]

[[portfoliocards-post-response]]
==== Representation
트랜잭션이 성공적으로 완료되었다면, CREATED 응답코드와 함께 아래 표현이 응답됩니다.

include::{snippets}/portfoliocards/post/http-response.adoc[]

include::{snippets}/portfoliocards/post/response-fields.adoc[]

[[portfoliocards-post-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 포트폴리오 카드 저장 요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/portfoliocards/post/fail/http-response.adoc[]

include::{snippets}/portfoliocards/post/fail/response-fields.adoc[]

[[portfoliocards-delete]]
=== 포트폴리오 카드 삭제하기
DB에 저장되어있는 유저에 대해서, 포트폴리오 카드를 삭제합니다.

CAUTION: 인증 필요

[[portfoliocards-delete-request]]
==== Request
요청시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/portfoliocards/delete/http-request.adoc[]

include::{snippets}/portfoliocards/delete/path-parameters.adoc[]

include::{snippets}/portfoliocards/delete/request-parameters.adoc[]

[[portfoliocards-delete-response]]
==== Representation
트랜잭션이 성공적으로 완료되었다면, 200 OK응답코드와 함께 아래 표현이 응답됩니다.

include::{snippets}/portfoliocards/delete/http-response.adoc[]

[[portfoliocards-delete-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 포트폴리오 카드 삭제 요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/portfoliocards/delete/fail/http-response.adoc[]

include::{snippets}/portfoliocards/delete/fail/response-fields.adoc[]

[[portfoliocards-delete-errorhandle2]]
==== IllegalParameterException
CAUTION: 잘못된 파라미터와 함께 요청시 IllegalParameterException 처리를 합니다.

include::{snippets}/portfoliocards/delete/parameterfail/http-request.adoc[]

include::{snippets}/portfoliocards/delete/fail/http-response.adoc[]

include::{snippets}/portfoliocards/delete/fail/response-fields.adoc[]

[[portfoliocards-put]]
=== 포트폴리오 카드 수정하기
DB에 저장되어있는 유저가 갖고있는 포트폴리오 카드를 수정할수있습니다.

포트폴리오 카드의 id값을 기준으로 수정됩니다.

CAUTION: 인증 필요

[[portfoliocards-put-request]]
==== Request
요청시 생성되는 HTTP 헤더는 아래와 같습니다.

include::{snippets}/portfoliocards/put/http-request.adoc[]

include::{snippets}/portfoliocards/put/request-fields.adoc[]

[[portfoliocards-put-response]]
==== Representation

성공적으로 수정되었다면 200 OK와 함께 아래 표현이 응답됩니다.

include::{snippets}/portfoliocards/put/http-response.adoc[]

include::{snippets}/portfoliocards/put/response-fields.adoc[]

[[portfoliocards-put-errorhandle1]]
==== NonExistUserException
CAUTION: 서버는 존재하지 않는 유저에 대한 포트폴리오 카드 수정요청에 대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/portfoliocards/get/fail/http-response.adoc[]

include::{snippets}/portfoliocards/get/fail/response-fields.adoc[]

[[portfoliocards-put-errorhandle2]]
==== UserExistButNothingException
CAUTION: 어떠한 포트폴리오 카드도 갖고있지 않은 유저의 포트폴리오 카드 수정 요청에대해 NonExistUserException 예외처리를 합니다.

include::{snippets}/portfoliocards/get/fail_but_exist_user/http-response.adoc[]

include::{snippets}/portfoliocards/get/fail_but_exist_user/response-fields.adoc[]

[[portfoliocards-put-errorhandle3]]
==== IllegalParameterException
CAUTION: 잘못된 파라미터와 함께 요청시 IllegalParameterException 처리를 합니다.

[[portfoliocard-get-svg-image]]
=== 포트폴리오 카드 이미지 가져오기
서버에 저장된 포트폴리오 카드의 svg이미지를 가져옵니다.

카드는 과정은 포트폴리오 카드를 저장할때 자동으로 저장되며, 따라서 저장 관련 HTTP METHOD는 활성화 되어있지 않습니다.

CAUTION: 반환 MIME타입은 image/svg+xml 입니다.

[[portfoliocard-get-svg-image-request]]
==== Request
요청 URL은 아래와 같습니다.

GET: https://api.gitofolio.com/portfoliocard/svg/{cardId}

예를들어, 서버의 응답이 아래와 같을때, 

include::{snippets}/portfoliocards/get/http-response.adoc[]

{cardId}부분에 응답받은 카드의 ID를 입력해서 요청합니다.

[[portfoliocard-get-svg-image-errorHandle]]
==== IllegalParameterException
CAUTION: 서버는 존재하지 않는 포트폴리오 카드 ID입력시 IllegalParameterException예외처리를 합니다.


[[auth]]
== 인증
모든 인증과정은 연동된 OAuth애플리케이션을 통해서 이뤄집니다. 

인증이 필요한 모든 요청은 프론트엔드 서버를 통해이루어 진다고 가정했으며, 따라서 인증 완료후 메인 페이지로 리다이렉트 됩니다.

이 목차에는 인증을 위해서 요청해야하는 URL이 기술되어 있습니다 

[[auth-github]]
=== Github
GET : https://github.com/login/oauth/authorize?client_id=b86796ef36e991c00490

